<html style="margin:0px; padding:0px">

    <head>
        <script src="webrift.js"></script>
        <script src="three.min.js"></script>
        <script src="OculusRiftEffect.js"></script>
    </head>

    <body style="margin:0px; padding: 0px">
    </body>

    <script>

        var camera, scene, renderer,
            geometry, material, light,
            mesh, texture,
            OReffect, webrift;

        init();
        animate();

        function init() {

            webrift = new Webrift("ws://localhost:1981");

            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.001, 100.0);
            camera.position.set(0, 1.62, 0);

            scene = new THREE.Scene();

            geometry = new THREE.CubeGeometry(10, 10, 10);
            texture = new THREE.ImageUtils.loadTexture( 'grid.png' );
            material = new THREE.MeshPhongMaterial({color: 0xffff00, side: THREE.DoubleSide, map: texture});
            mesh = new THREE.Mesh(geometry, material);
            mesh.position.set(0, 5, 0);
            scene.add(mesh);

            light = new THREE.PointLight(0xffffff, 1.0, 48.0);
            light.position.set(0, 5, 0);
            scene.add(light)

            renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0xffffff);

            var HMD = {
                hResolution: window.innerWidth,
                vResolution: window.innerHeight,
                hScreenSize: 0.14976,
                vScreenSize: 0.0936,
                interpupillaryDistance: 0.064,
                lensSeparationDistance: 0.064,
                eyeToScreenDistance: 0.041,
                distortionK : [1.0, 0.22, 0.24, 0.0],
                chromaAbParameter: [ 0.996, -0.004, 1.014, 0.0]
            };
            OReffect = new THREE.OculusRiftEffect(renderer, {HMD: HMD});
            OReffect.setSize(window.innerWidth, window.innerHeight);

            document.body.appendChild(renderer.domElement);

        }

        function animate() {

            requestAnimationFrame(animate);
            camera.quaternion.set(webrift.x, webrift.y, webrift.z, webrift.w);
            OReffect.render(scene, camera);

        }

    </script>


</html>